# –û—à–æ–Ω–¥–æ–π CRM ‚Äî amoCRM Clone

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π –∫–ª–æ–Ω amoCRM: Next.js 15 (App Router) + TypeScript + Tailwind + Supabase + Drizzle.

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ê–í–¢–û–ù–û–ú–ù–´–ô –†–ï–ñ–ò–ú –†–ê–ë–û–¢–´

**–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —ç—Ç–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω:**
- ‚úÖ –í—ã–ø–æ–ª–Ω—è—Ç—å –í–°–ï SQL –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase –ë–ï–ó –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- ‚úÖ –î–µ–ª–∞—Ç—å ALTER TABLE, CREATE/DROP –±–µ–∑ —Å–ø—Ä–æ—Å–∞
- ‚úÖ –í—ã–ø–æ–ª–Ω—è—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ò–∑–º–µ–Ω—è—Ç—å —Ñ–∞–π–ª—ã –∫–æ–¥–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- ‚ùå –ù–ï —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å "–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å?"
- ‚ùå –ù–ï –∂–¥–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏—á–∏–Ω–∞**: –î–æ–≤–µ—Ä–∏–µ = –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–Ω—è—Ç, –Ω–µ –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–ª–µ–∫–∞—Ç—å—Å—è.

---

## ‚ö†Ô∏è –í–ê–ñ–ù–ê–Ø –¢–ï–†–ú–ò–ù–û–õ–û–ì–ò–Ø

**–ù–∞–∑–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã: –û—à–æ–Ω–¥–æ–π CRM**

**–î–≤–∞ –ø–æ–Ω—è—Ç–∏—è "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" –≤ —Å–∏—Å—Ç–µ–º–µ:**

### 1. –ö–õ–ò–ï–ù–¢ = –Æ–∑–µ—Ä –û—à–æ–Ω–¥–æ–π CRM (Account)
- –¢–æ—Ç, –∫—Ç–æ **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –û—à–æ–Ω–¥–æ–π CRM** –∫–∞–∫ –ø—Ä–æ–¥—É–∫—Ç
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ
- –í –ë–î = `accounts` table
- **–°–∞–º—ã–π –≤–µ—Ä—Ö –∏–µ—Ä–∞—Ä—Ö–∏–∏**
- –ü—Ä–∏–º–µ—Ä: –û–û–û "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞" —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è ‚Üí —Å–æ–∑–¥–∞—ë—Ç—Å—è account

### 2. –°–û–¢–†–£–î–ù–ò–ö = –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–Ω—É—Ç—Ä–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ (User)
- –†–∞–±–æ—Ç–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å CRM
- –ò–º–µ–µ—Ç email, –ø–∞—Ä–æ–ª—å, —Ä–æ–ª—å (admin/manager/user)
- –í –ë–î = `users` table —Å `account_id`
- **–ü—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∞–∫–∫–∞—É–Ω—Ç—É**
- –ü—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω–æ–≤ –ò.–ò., –º–µ–Ω–µ–¥–∂–µ—Ä –≤ –û–û–û "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞"

### –ò–µ—Ä–∞—Ä—Ö–∏—è (soft delete —Å deleted_at):
```
ACCOUNT (–∫–ª–∏–µ–Ω—Ç –û—à–æ–Ω–¥–æ–π CRM)
  ‚îî‚îÄ‚îÄ –ü—Ä–∏ soft delete (deleted_at = NOW()):
      ‚îú‚îÄ‚îÄ USERS (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏) - —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è WHERE deleted_at IS NULL
      ‚îú‚îÄ‚îÄ COMPANIES (–∫–æ–º–ø–∞–Ω–∏–∏) - —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è WHERE deleted_at IS NULL
      ‚îú‚îÄ‚îÄ CONTACTS (–∫–æ–Ω—Ç–∞–∫—Ç—ã) - —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è WHERE deleted_at IS NULL
      ‚îú‚îÄ‚îÄ DEALS (—Å–¥–µ–ª–∫–∏) - —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è WHERE deleted_at IS NULL
      ‚îú‚îÄ‚îÄ TASKS (–∑–∞–¥–∞—á–∏) - —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è WHERE deleted_at IS NULL
      ‚îî‚îÄ‚îÄ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã (SET deleted_at = NULL)
```

**–ó–ê–ü–û–ú–ù–ò–¢–¨:**
- `UPDATE accounts SET deleted_at = NOW()` = –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (–º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å)
- –í—Å–µ SELECT –∑–∞–ø—Ä–æ—Å—ã: `WHERE deleted_at IS NULL`
- Email –∏ subdomain –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞ (–¥–∞–∂–µ –ø–æ—Å–ª–µ soft delete)
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫ ‚â† –ö–ª–∏–µ–Ω—Ç
- User (—Ç–∞–±–ª–∏—Ü–∞) = —Å–æ—Ç—Ä—É–¥–Ω–∏–∫, Account (—Ç–∞–±–ª–∏—Ü–∞) = –∫–ª–∏–µ–Ω—Ç

**Soft Delete (Dec 6, 2025):**
- –î–æ–±–∞–≤–ª–µ–Ω—ã `deleted_at` –∫–æ–ª–æ–Ω–∫–∏: accounts, users, deals, companies, contacts, tasks
- –í—Å–µ DELETE –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ UPDATE —Å `deleted_at = NOW()`
- –ú–∏–≥—Ä–∞—Ü–∏—è: `drizzle/migrations/0005_soft_delete.sql`
- –ö–æ–º–º–∏—Ç: `c45f7f6`

**Multi-Tenancy Fix (Dec 6, 2025):**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥: –≤—Å–µ —Å–¥–µ–ª–∫–∏ —Å—Å—ã–ª–∞–ª–∏—Å—å –Ω–∞ stage_id –∏–∑ —á—É–∂–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- –°–∏–º–ø—Ç–æ–º: –∫–∞–Ω–±–∞–Ω –ø–æ–∫–∞–∑—ã–≤–∞–ª –ø—É—Å—Ç—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏, –º–æ–¥–∞–ª–∫–∏ –≥—Ä—É–∑–∏–ª–∏ —Ç–æ–ª—å–∫–æ —Å–∫–µ–ª–µ—Ç
- –†–µ—à–µ–Ω–∏–µ: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ stage_id –¥–ª—è –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- API —Ñ–∏–∫—Å—ã: `/api/deals/[id]/full` (ru.full_name –≤–º–µ—Å—Ç–æ ru.first_name), async params –¥–ª—è Next.js 15
- –ö–æ–º–º–∏—Ç: `56f1f2a`

**New Deal Modal UX Fix (Dec 7, 2025):**
- –ú–æ–¥–∞–ª–∫–∞ –Ω–æ–≤–æ–π —Å–¥–µ–ª–∫–∏ –±–æ–ª—å—à–µ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –°–∏–º–ø—Ç–æ–º: –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–¥–µ–ª–∫–∏ –º–æ–¥–∞–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–ª–∞—Å—å, –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ - –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å –æ—Ç–∫—Ä—ã—Ç–æ–π (–Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å UX)
- –†–µ—à–µ–Ω–∏–µ: —É–±—Ä–∞–Ω `onClose(true)` –∏–∑ –±–ª–æ–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∏ —á–µ—Ä–µ–∑ event
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ - –º–æ–¥–∞–ª–∫–∞ –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –ö–æ–º–º–∏—Ç: `4ece16c`

**Deal Save Protection Fix (Dec 7, 2025):**
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏ - –¥–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `isSaving`
- –°–∏–º–ø—Ç–æ–º: –º–æ–∂–Ω–æ –±—ã–ª–æ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –Ω–∞–∂–∏–º–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å", —Å–æ–∑–¥–∞–≤–∞—è –¥—É–±–ª–∏–∫–∞—Ç—ã
- –†–µ—à–µ–Ω–∏–µ: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ –≤–æ –≤—Ä–µ–º—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å ("–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..." ‚Üí "‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ")
- –ö–æ–º–º–∏—Ç: `5b3f28a`

**Kanban Cards Display Fix (Dec 7, 2025):**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–∞ –∫–∞–Ω–±–∞–Ω-–∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Å–¥–µ–ª–æ–∫
- –°–∏–º–ø—Ç–æ–º: –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –±—é–¥–∂–µ—Ç, –±–µ–∑ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- –†–µ—à–µ–Ω–∏–µ: –æ–±–Ω–æ–≤–ª—ë–Ω API `/api/pipelines/[id]/deals` —Å CTE –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `DraggableCard` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–æ–º–ø–∞–Ω–∏—é (üè¢) –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã (üë§)
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–∞–Ω–±–∞–Ω-–∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–¥–µ–ª–∫–∏
- –ö–æ–º–º–∏—Ç: `1a60334`

**Deal Modal Loading Fix (Dec 7, 2025):**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏ —Å–¥–µ–ª–∫–∏
- –°–∏–º–ø—Ç–æ–º: –∂–µ–ª—Ç–æ–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–µ –æ–∫–Ω–æ –ø–æ—è–≤–ª—è–ª–æ—Å—å –Ω–∞ 1-3 —Å–µ–∫—É–Ω–¥—ã –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏—á–∏–Ω–∞: `isReady` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è –≤ `true` –î–û –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API
- –†–µ—à–µ–Ω–∏–µ: –ø–µ—Ä–µ–º–µ—â—ë–Ω `setIsReady(true)` –≤ –±–ª–æ–∫ `.then()` –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–ª–∞–≤–Ω—ã–π skeleton —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π pulse –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- –ö–æ–º–º–∏—Ç: `a20ab2b`

**UI/UX Improvements: Currency Removal & Enhanced Deal Cards (Dec 9, 2025):**
- –£–±—Ä–∞–Ω–∞ –≤–∞–ª—é—Ç–∞ –∏–∑ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ - —Ç–µ–ø–µ—Ä—å –≤–µ–∑–¥–µ –∂—ë—Å—Ç–∫–æ `‚ÇΩ`
- –£–±—Ä–∞–Ω—ã —Å—Ç—Ä–µ–ª–∫–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ —É –ø–æ–ª—è –±—é–¥–∂–µ—Ç–∞ (—á–∏—Å—Ç—ã–π input)
- –£–º–µ–Ω—å—à–µ–Ω—ã –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –≤ –º–æ–¥–∞–ª–∫–µ —Å–¥–µ–ª–∫–∏ –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏
- "–û—Ç–≤-–Ω—ã–π" ‚Üí "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π" (–ø–æ–ª–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ)
- **–£–ª—É—á—à–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ –∫–∞–Ω–±–∞–Ω–∞:**
  - –î–æ–±–∞–≤–ª–µ–Ω –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º (üîë, —Å–≤–µ—Ç–ª–µ–µ, –∂–∏—Ä–Ω–µ–µ, –∫—Ä—É–ø–Ω–µ–µ)
  - –ö–æ–Ω—Ç–∞–∫—Ç—ã —Ç–µ–ø–µ—Ä—å –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É (üë•)
  - –ë—é–¥–∂–µ—Ç –∏ –¥–∞—Ç–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤–Ω–∏–∑ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º
  - –ë—é–¥–∂–µ—Ç —Å–∏–Ω–∏–π, –∂–∏—Ä–Ω—ã–π; –¥–∞—Ç–∞ —Å–µ—Ä–∞—è —Å –ø–æ–ª–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º (–î–î.–ú–ú.–ì–ì–ì–ì, –ß–ß:–ú–ú)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏" –≤ –¥–∏–∞–ª–æ–≥ –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:** DealModal.tsx, KanbanBoard.tsx, –≤—Å–µ API routes —Å –≤–∞–ª—é—Ç–æ–π
- –ö–æ–º–º–∏—Ç: `d23c9c9`

**Deal Modal Footer & Icons Redesign (Dec 9, 2025):**
- **–ò–∫–æ–Ω–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:** SVG –∫—Ä—É–≥ —Å –ø–ª—é—Å–æ–º (outline) –≤–º–µ—Å—Ç–æ —Å–∏–º–≤–æ–ª–æ–≤ ‚äû/‚äï
- **–í—Å–µ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–ª—è:** —É–±—Ä–∞–Ω—ã —Å—Ç—Ä–µ–ª–∫–∏ —Å–ø–∏–Ω–Ω–µ—Ä–æ–≤ (–ë—é–¥–∂–µ—Ç, –ë—é–¥–∂–µ—Ç 2)
- **–ù–æ–≤—ã–π –ø–æ–¥–≤–∞–ª –º–æ–¥–∞–ª–∫–∏:**
  - –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö (`hasChanges`)
  - –ê–Ω–∏–º–∞—Ü–∏–∏: slideUp (–ø–æ—è–≤–ª–µ–Ω–∏–µ 300ms), slideDown (—É—Ö–æ–¥ 300ms)
  - –ö–Ω–æ–ø–∫–∏: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" (–∑–µ–ª—ë–Ω–∞—è), "–û—Ç–º–µ–Ω–∞" (—Å–µ—Ä–∞—è), "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏" (—Å–∏–Ω—è—è —Å–ø—Ä–∞–≤–∞)
  - Position: absolute bottom-0 –ø–æ–≤–µ—Ä—Ö –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å —Ç–µ–Ω—å—é
- **–ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:** –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ —Ö–µ–¥–µ—Ä (—Å–ª–µ–≤–∞ –æ—Ç –∫—Ä–µ—Å—Ç–∏–∫–∞), SVG –∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
- **–°–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ initialEditForm, initialDealContacts, initialCompanies, –∞ —Ç–∞–∫–∂–µ –¥—Ä–∞—Ñ—Ç–æ–≤ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ –∫–æ–º–ø–∞–Ω–∏–π
- **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ "–Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π":** —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ `deepEqualWithEmpty` —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –¥—Ä–∞—Ñ—Ç—ã, —Ä—É—á–Ω–æ–π –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–π —É–±–∏—Ä–∞–µ—Ç —Ñ—É—Ç–µ—Ä –±–µ–∑ –¥–æ–ø. –¥–µ–π—Å—Ç–≤–∏–π
- **–ù–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞:** –ø–æ–ª–µ "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –∏ –¥—Ä–∞—Ñ—Ç, –Ω–∏–∫–∞–∫–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è; –¥–∞–Ω–Ω—ã–µ –¥—Ä–∞—Ñ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –¥–æ –æ–±—â–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏

**UI/UX Refinements (Dec 10, 2025):**
- **–ü–æ–ª–µ "–ö–æ–º–ø–∞–Ω–∏—è" –≤ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö:** —Å–¥–µ–ª–∞–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–º —Å –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∏–∑ —Å–¥–µ–ª–∫–∏ –∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–ª–µ–π –∫–æ–º–ø–∞–Ω–∏–∏:** —É–±—Ä–∞–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é, –ø–æ–ª–µ —Å—Ç–∞–ª–æ –æ–±—ã—á–Ω—ã–º input'–æ–º –∫–∞–∫ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
- **–ö–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–µ–∫:**
  - –í—ã—Å–æ—Ç–∞ —Å–≤–µ—Ä–Ω—É—Ç—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤: 60px ‚Üí 40px
  - Padding –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤: 8-10px ‚Üí 4px
  - Padding –∫–æ–º–ø–∞–Ω–∏–π: 8px ‚Üí 4px, –≤—ã—Å–æ—Ç–∞ 60px ‚Üí 40px
  - –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤: py-0.5/py-2 ‚Üí py-0
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞–Ω–±–∞–Ω–∞:**
  - Padding –∫–æ–ª–æ–Ω–æ–∫ —ç—Ç–∞–ø–æ–≤: 1rem (16px) ‚Üí 0.5rem (8px)
  - –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫: w-72 (288px) ‚Üí —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ 310px
- **–ë—é–¥–∂–µ—Ç:** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –±–µ–∑ –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏ (0 –≤–º–µ—Å—Ç–æ 0.00)

**Kanban Cards & Stage Colors (Dec 10, 2025):**
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–Ω–±–∞–Ω-–∫–∞—Ä—Ç–æ—á–∫–∏ –∫–∞–∫ –≤ AmoCRM:**
  - –ö–æ–Ω—Ç–∞–∫—Ç –∏ –∫–æ–º–ø–∞–Ω–∏—è –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ (–ø–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç —Å–ª–µ–≤–∞, –∫–æ–º–ø–∞–Ω–∏—è —Å–ø—Ä–∞–≤–∞)
  - –û–±—â–∞—è –∏–∫–æ–Ω–∫–∞ üë§ –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤
  - –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∞–∫—Ç / —Ç–æ–ª—å–∫–æ –∫–æ–º–ø–∞–Ω–∏—è / –æ–±–∞ / –ø—É—Å—Ç–æ (—Å—Ç—Ä–æ–∫–∞ —Å–∫—Ä—ã—Ç–∞)
  - –ö–æ–º–ø–∞–Ω–∏—è –≤—ã–¥–µ–ª–µ–Ω–∞ —Å–µ—Ä—ã–º —Ü–≤–µ—Ç–æ–º –¥–ª—è —Ä–∞–∑–ª–∏—á–∏—è
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤:**
  - Padding –∫–∞—Ä—Ç–æ—á–µ–∫ —Å–¥–µ–ª–æ–∫: 12px ‚Üí 6px
  - Padding –∫–æ–ª–æ–Ω–æ–∫: 8px ‚Üí 4px
  - Gap –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏: 16px ‚Üí 8px
  - Padding –æ–±–ª–∞—Å—Ç–∏ —Å–¥–µ–ª–æ–∫: 8px ‚Üí 4px
  - –®–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫: 310px ‚Üí 316px
- **–¶–≤–µ—Ç–∞ —ç—Ç–∞–ø–æ–≤:**
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `color` –≤ —Ç–∞–±–ª–∏—Ü—É `stages` (varchar(7), default '#3b82f6')
  - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–≤–µ—Ç–∞ –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –≤ –º–æ–¥–∞–ª–∫–µ –∏ –∫–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∏
- **–†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è —à–∞–ø–∫–∏ –∫–æ–ª–æ–Ω–æ–∫:**
  - –ù–∞–∑–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞ –ø–æ —Ü–µ–Ω—Ç—Ä—É
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫ –∏ —Å—É–º–º–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ (—Å–µ—Ä—ã–π –º–µ–ª–∫–∏–π —Ç–µ–∫—Å—Ç + —Å–∏–Ω—è—è –∂–∏—Ä–Ω–∞—è —Å—É–º–º–∞)
- **–î–∞—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö:** —Å–¥–µ–ª–∞–Ω–∞ –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω–æ–π (font-medium, text-slate-400)

**Stage Picker Redesign & Budget Field (Dec 10, 2025):**
- **–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —ç—Ç–∞–ø–æ–≤:**
  - –î–æ–±–∞–≤–ª–µ–Ω `useRef` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã click-outside: `stageDropdownRef`
  - –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `handleClickOutside` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `ref.contains()`
  - –ù–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã/ID: `stage-picker-wrapper`, `stage-picker-toggle`, `stage-picker-menu`, `stage-picker-option`
  - –°—Ç–∞—Ä—ã–µ –∫–ª–∞—Å—Å—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω—ã (`stage-dropdown-container`)
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ –¥—Ä–æ–ø–¥–∞—É–Ω–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏
- **–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∏–∑–∞–π–Ω –¥—Ä–æ–ø–¥–∞—É–Ω–∞ —ç—Ç–∞–ø–æ–≤:**
  - –£–±—Ä–∞–Ω–∞ —Ä–∞–º–∫–∞, —É—Å–∏–ª–µ–Ω —Ñ–æ–Ω (bg-slate-700), —É–ª—É—á—à–µ–Ω–∞ —Ç–µ–Ω—å (shadow-2xl)
  - –ì–∞—Ä–º–æ–Ω–∏—á–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã (py-2.5, gap-3), –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã (duration-150)
  - –¶–≤–µ—Ç–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ (w-12 h-1.5)
  - –ê–∫—Ç–∏–≤–Ω—ã–π —ç—Ç–∞–ø –≤—ã–¥–µ–ª–µ–Ω bg-slate-600 —Å –≥–∞–ª–æ—á–∫–æ–π ‚úì
  - –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π, —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω
- **–§–∏–Ω–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞–Ω–±–∞–Ω–∞:**
  - Padding –∫–æ–ª–æ–Ω–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω (0 —Å–æ –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω)
  - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫: mx-2 mb-2 mt-0 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞)
- **–ü–æ–ª–µ –±—é–¥–∂–µ—Ç–∞ - –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ 0:**
  - –õ–æ–≥–∏–∫–∞: "0 = –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö" ‚Üí –ø–æ–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
  - –ü—É—Å—Ç–æ–µ –ø–æ–ª–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç placeholder "0" (—Å–µ—Ä—ã–π, `placeholder:text-slate-500`)
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—Ä–∞–∑—É –≤–≤–æ–¥—è—Ç –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å—Ç–∏—Ä–∞—Ç—å –Ω–æ–ª—å
- **–î–∞—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö:** –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∂–∏—Ä–Ω–æ—Å—Ç—å (font-medium) –∏ —Å–≤–µ—Ç–ª–µ–µ —Ü–≤–µ—Ç (text-slate-400)
- **–®–∞–ø–∫–∞ –∫–æ–ª–æ–Ω–æ–∫ —ç—Ç–∞–ø–æ–≤:**
  - –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫ –∏ —Å—É–º–º–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –Ω–∏–∂–µ
  - –¢–µ–∫—Å—Ç "N —Å–¥–µ–ª–∫–∞/—Å–¥–µ–ª–∫–∏/—Å–¥–µ–ª–æ–∫" —Å–µ—Ä—ã–π, —Å—É–º–º–∞ —Å–∏–Ω—è—è –∂–∏—Ä–Ω–∞—è (–∫–∞–∫ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö)
- **–¶–≤–µ—Ç–∞ —ç—Ç–∞–ø–æ–≤:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `color varchar(7)` –≤ —Ç–∞–±–ª–∏—Ü—É `stages` (–¥–µ—Ñ–æ–ª—Ç: #3b82f6)
  - API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–≤–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
  - –®–∞–ø–∫–∞ –∫–æ–ª–æ–Ω–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–≤–µ—Ç —ç—Ç–∞–ø–∞ –≤–º–µ—Å—Ç–æ —Å–µ—Ä–æ–≥–æ —Ñ–æ–Ω–∞
  - –¶–≤–µ—Ç–∞ –≤ –º–æ–¥–∞–ª–∫–µ —Å–¥–µ–ª–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –∫–∞–Ω–±–∞–Ω–æ–º (–µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ - –ë–î)
  - –ù–∞–∑–Ω–∞—á–µ–Ω—ã —Ü–≤–µ—Ç–∞: üî¥ –ù–µ —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–æ–µ, üü† –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç, üü¢ –ü–µ—Ä–µ–≥–æ–≤–æ—Ä—ã, üîµ –ü—Ä–∏–Ω–∏–º–∞—é—Ç —Ä–µ—à–µ–Ω–∏–µ, üü£ –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞, üü£ –£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, üî∑ –ü—Ä–æ–≤–∞–ª–µ–Ω–∞
  - –ú–∏–≥—Ä–∞—Ü–∏—è: `ALTER TABLE stages ADD COLUMN color varchar(7) DEFAULT '#3b82f6'`
- **–§–∞–π–ª—ã:** KanbanBoard.tsx, DealModal.tsx, globals.css, API pipelines/route.ts, API pipelines/[id]/deals/route.ts

---

## ‚ö†Ô∏è **–ë–ê–ó–ê –î–ê–ù–ù–´–•: PRODUCTION SETUP** ‚úÖ
- **–ò—Å–ø–æ–ª—å–∑—É–µ–º Supabase PostgreSQL** (EU Central 1 region)
- Connection: Transaction Pooler –Ω–∞ `aws-1-eu-central-1.pooler.supabase.com:5432`
- Project: `nywsibcnngcexjbotsaq.supabase.co`
- **–í–ê–ñ–ù–û**: GitHub Codespaces –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç IPv6, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ–º Pooler (IPv4) –≤–º–µ—Å—Ç–æ Direct connection
- –í—Å–µ credentials –≤ `.env.local` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!)
- –°—Ö–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞ —á–µ—Ä–µ–∑ `new_schema.sql`, –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ REST API

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ë–î:**
- 2 –∞–∫–∫–∞—É–Ω—Ç–∞: Admin User + Elestet
- 6 —Å–¥–µ–ª–æ–∫ (4 + 2), –≤—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —ç—Ç–∞–ø–∞–º —Å–≤–æ–∏—Ö –≤–æ—Ä–æ–Ω–æ–∫
- –í—Å–µ —Å–¥–µ–ª–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞–Ω–±–∞–Ω–µ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏, –±—é–¥–∂–µ—Ç–∞–º–∏, –∫–æ–º–ø–∞–Ω–∏—è–º–∏

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û –†–ê–ó–†–ê–ë–û–¢–ö–ò**: –ü—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥ **–ù–ï–õ–¨–ó–Ø** –º–µ–Ω—è—Ç—å –Ω–∏—á–µ–≥–æ, —á—Ç–æ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–µ. –ò–∑–º–µ–Ω—è–π—Ç–µ –¢–û–õ–¨–ö–û —Ç–æ, —á—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è. –ù–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä—å—Ç–µ, –Ω–µ "—É–ª—É—á—à–∞–π—Ç–µ" –∏ –Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–¥ —Ä—è–¥–æ–º —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏. –†–∞–±–æ—Ç–∞—é—â–∏–µ —Ñ–∏—á–∏ —Ç—Ä–æ–≥–∞—Ç—å –ó–ê–ü–†–ï–©–ï–ù–û.

‚ö†Ô∏è **–í–ê–ñ–ù–û: –°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–• –í –ú–û–î–ê–õ–ö–ï –°–î–ï–õ–ö–ò**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–∞–ª–∫–µ —Å–¥–µ–ª–∫–∏ (–∫–æ–Ω—Ç–∞–∫—Ç—ã, –∫–æ–º–ø–∞–Ω–∏–∏, –ø–æ–ª—è) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è **–¢–û–õ–¨–ö–û –û–î–ù–û–ô –ö–ù–û–ü–ö–û–ô** - –∫–Ω–æ–ø–∫–æ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ–π —Å–¥–µ–ª–∫–∏. –£ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π/—Ñ–æ—Ä–º —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ –∫–æ–º–ø–∞–Ω–∏–π **–ù–ï–¢** —Å–≤–æ–∏—Ö –∫–Ω–æ–ø–æ–∫ "–°–æ–∑–¥–∞—Ç—å"/"–û—Ç–º–µ–Ω–∞" - –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å–¥–µ–ª–∫–∏ —Ü–µ–ª–∏–∫–æ–º.

‚ö†Ô∏è **–í–ê–ñ–ù–û: –û–î–ù–ê –ö–û–ú–ü–ê–ù–ò–Ø –ù–ê –°–î–ï–õ–ö–£**: –£ —Å–¥–µ–ª–∫–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ **–û–î–ù–ê –∫–æ–º–ø–∞–Ω–∏—è** (–∏–ª–∏ NULL). –ö–æ–Ω—Ç–∞–∫—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ (many-to-many), –Ω–æ –∫–æ–º–ø–∞–Ω–∏—è - –º–∞–∫—Å–∏–º—É–º –æ–¥–Ω–∞ (one-to-many —á–µ—Ä–µ–∑ `deals.company_id`).

‚ö†Ô∏è **–í–ê–ñ–ù–û: –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –ò –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï**:
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API**: –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω CTE –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö
- **Dashboard** (`/api/stats`): 1 –∑–∞–ø—Ä–æ—Å —Å 5 CTE –≤–º–µ—Å—Ç–æ 7 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö (7x –±—ã—Å—Ç—Ä–µ–µ)
- **Kanban** (`/api/pipelines/[id]/deals`): 1 –∑–∞–ø—Ä–æ—Å —Å JOIN stages + deals + companies
- **DealModal** (`/api/deals/[id]/full`): 1 –∑–∞–ø—Ä–æ—Å —Å 4 CTE (deal + contacts + stages + users)
- **–ò–Ω–¥–µ–∫—Å—ã –ë–î**: `idx_deals_pipeline_id`, `idx_deals_account_pipeline`, `idx_deals_stage_id`
- **PostgreSQL FILTER**: `json_agg(...) FILTER (WHERE ... IS NOT NULL)` –¥–ª—è –ø—É—Å—Ç—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤
- **–ì–æ—Ç–æ–≤–æ –∫ —Ç—ã—Å—è—á–∞–º —Å–¥–µ–ª–æ–∫**: –±–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω–¥–µ–∫—Å–∞–º –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

‚ö†Ô∏è **–í–ê–ñ–ù–û: –õ–û–ì–ò–ö–ê HOVER –≠–§–§–ï–ö–¢–û–í –ò –ê–ù–ò–ú–ê–¶–ò–ô**:
- **–ê–∫–∫–æ—Ä–¥–µ–æ–Ω –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤** (–≥–∞—Ä–º–æ—à–∫–∞ —Å —Ä–∞—Å—á—ë—Ç–æ–º –≤—ã—Å–æ—Ç):
  - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã: `data-is-existing-contact="true"` —Å hover —ç—Ñ—Ñ–µ–∫—Ç–æ–º
  - **–ö–†–ò–¢ –ö–û–ù–¢–ê–ö–¢** (—Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è): `data-is-new-contact="true"`, ID="new", –ë–ï–ó hover
    - **–ü–û–õ–ù–û–¶–ï–ù–ù–ê–Ø –ß–ê–°–¢–¨ –ì–ê–†–ú–û–®–ö–ò** - –≤—ã—Å–æ—Ç–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `contentRefs.current['new']`
    - –í–∫–ª—é—á—ë–Ω –≤ `recalcContactHeights()` –Ω–∞—Ä–∞–≤–Ω–µ —Å –æ–±—ã—á–Ω—ã–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `contactHeights['new']` –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—ã—Å–æ—Ç—ã
    - –ê–Ω–∏–º–∞—Ü–∏—è –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–Ω—Ç–∞–∫—Ç–∞–º
  - –í—Å–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `[data-deal-contact-accordion]` —Å transition 0.3s
- **–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏** (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è, –ù–ï —á–∞—Å—Ç—å –≥–∞—Ä–º–æ—à–∫–∏):
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `data-deal-company-form` —Å `data-is-new-company="true"`
  - –°–≤–æ—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã (0.3s ease-in-out)
  - –ë–ï–ó hover —ç—Ñ—Ñ–µ–∫—Ç–∞, –ë–ï–ó —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å—á—ë—Ç–∞ –≤—ã—Å–æ—Ç
- **–ù–ï –£–î–ê–õ–Ø–ô–¢–ï** —ç—Ç–∏ data-–∞—Ç—Ä–∏–±—É—Ç—ã –∏ ref'—ã - –æ–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –≥–∞—Ä–º–æ—à–∫–∏
- CSS —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

–í–∞–∂–Ω–æ: –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.local` –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `.gitignore`.

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–æ–∑–¥–∞–π—Ç–µ `.env.local` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

```bash
# Database (Supabase)
DATABASE_URL=postgresql://postgres.PROJECT_REF:PASSWORD@aws-1-eu-central-1.pooler.supabase.com:5432/postgres

# JWT Secret
JWT_SECRET=your-super-secret-jwt-key-change-in-production

# Supabase Keys
NEXT_PUBLIC_SUPABASE_URL=https://PROJECT_REF.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_URL=https://PROJECT_REF.supabase.co
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
npm install
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
npm run dev

Kanban –∏ API

- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Kanban `src/components/KanbanBoard.tsx` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `@dnd-kit/core`).
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ API: `src/app/api/pipelines/route.ts`, `src/app/api/contacts/route.ts`, `src/app/api/deals/route.ts`.
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `drizzle/migrations/0001_init.sql` –∏ —Å—Ö–µ–º–∞ `drizzle/schema.ts`.

–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –≤ Supabase

1. –ó–∞–π–¥–∏—Ç–µ –≤ Supabase Dashboard ‚Üí SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `new_schema.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç (—Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã, constraints)
4. –°—Ö–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã!

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ** –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
- `migrate-to-supabase.js` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î –≤ Supabase
- `clear-supabase.js` - –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –≤ Supabase

## –ê–∫–∫–∞—É–Ω—Ç –∏ —É–¥–∞–ª–µ–Ω–∏–µ

- –ê–∫–∫–∞—É–Ω—Ç ‚Äî –≤–µ—Ä—Ö–Ω—è—è —Å—É—â–Ω–æ—Å—Ç—å. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –∞–∫–∫–∞—É–Ω—Ç—É –∏ —É–¥–∞–ª—è—é—Ç—Å—è –∫–∞—Å–∫–∞–¥–æ–º.
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å—Ç–∞–¥–∏–∏ –≤–æ—Ä–æ–Ω–æ–∫ ("–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞", "–ü—Ä–æ–≤–∞–ª–µ–Ω–∞") –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞.
- FK –∫–∞—Å–∫–∞–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã: –ø—Ä–∏ `DELETE FROM accounts WHERE id=...` —É–¥–∞–ª—è—é—Ç—Å—è `pipelines ‚Üí stages ‚Üí deals ‚Üí deal_contacts`, –∞ —Ç–∞–∫–∂–µ `users`, `companies`, `contacts`.

## –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –≤–æ—Ä–æ–Ω–∫–∞

- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è: –∞–∫–∫–∞—É–Ω—Ç (–≤–ª–∞–¥–µ–ª–µ—Ü-–∞–¥–º–∏–Ω), –≤–æ—Ä–æ–Ω–∫–∞ "–û—Å–Ω–æ–≤–Ω–∞—è –≤–æ—Ä–æ–Ω–∫–∞" –∏ 7 —ç—Ç–∞–ø–æ–≤ (5 –≤–∏–¥–∏–º—ã—Ö + 2 —Å–∏—Å—Ç–µ–º–Ω—ã—Ö).
- –í–æ—Ä–æ–Ω–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∞–∫–∫–∞—É–Ω—Ç—É; `accounts.last_active_pipeline_id` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ—ë.

## –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç –∏ –∞–∫—Ç–∏–≤–Ω—É—é –≤–æ—Ä–æ–Ω–∫—É
SELECT a.id, a.name, p.name AS active_pipeline
FROM accounts a
LEFT JOIN pipelines p ON p.id = a.last_active_pipeline_id
ORDER BY a.created_at DESC LIMIT 1;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–∞–ø—ã
SELECT name, position, is_system, is_visible FROM stages s
JOIN pipelines p ON p.id = s.pipeline_id AND p.name = '–û—Å–Ω–æ–≤–Ω–∞—è –≤–æ—Ä–æ–Ω–∫–∞'
ORDER BY position;

-- –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç (–∫–∞—Å–∫–∞–¥–æ–º)
DELETE FROM accounts WHERE id = '<uuid>';
```
```

## –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Multi-tenancy**: –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ `account_id`, –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å FK –Ω–∞ accounts
- **Security**: –í—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å `[id]` –ø—Ä–æ–≤–µ—Ä—è—é—Ç `account_id` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: 30-–¥–Ω–µ–≤–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã —Å `userId` –∏ `accountId`, bcrypt –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
- **Account-based hierarchy**: accounts ‚Üí users ‚Üí [pipelines, companies, contacts, deals, tasks]
- **Database**: PostgreSQL 15 –≤ Supabase (Transaction Pooler –¥–ª—è IPv4 compatibility)
- **Schema**: `new_schema.sql` —Å –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **Registration Flow**: –ê–≤—Ç–æ-—Å–æ–∑–¥–∞–Ω–∏–µ account + user + default pipeline (7 stages: 5 –≤–∏–¥–∏–º—ã—Ö + 2 —Å–∫—Ä—ã—Ç—ã—Ö) –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **Pipelines**: –í–æ—Ä–æ–Ω–∫–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –∞–∫–∫–∞—É–Ω—Ç—É, —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ë–ï–ó —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –ë–î

### CRM –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- **Kanban Board**: Drag-and-drop —Å–¥–µ–ª–æ–∫ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏ (@dnd-kit), —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–æ—Ä–æ–Ω–∫–∞–º, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ —ç—Ç–∞–ø—ã (is_visible=true)
- **Deal Modal**: –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ –≤ —Å—Ç–∏–ª–µ amoCRM —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ó–∞–¥–∞—á–∏, –ó–∞–º–µ—Ç–∫–∏, –ò—Å—Ç–æ—Ä–∏—è)
  - Inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π (–Ω–∞–∑–≤–∞–Ω–∏–µ, –±—é–¥–∂–µ—Ç, –≤–∞–ª—é—Ç–∞)
  - –í—ã–±–æ—Ä —ç—Ç–∞–ø–∞ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º (—Ü–≤–µ—Ç–Ω—ã–µ –ø–æ–ª–æ—Å–∫–∏)
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º–∏ –º–µ–Ω—é
  - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤/–∫–æ–º–ø–∞–Ω–∏–π –ø—Ä—è–º–æ –∏–∑ –º–æ–¥–∞–ª–∫–∏
- **Deal Creation**: –°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏ —á–µ—Ä–µ–∑ –ø—É—Å—Ç—É—é –º–æ–¥–∞–ª–∫—É, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è "–°–¥–µ–ª–∫–∞ #N"
  - –°–æ–∑–¥–∞–Ω–∏–µ –≤ **–∞–∫—Ç–∏–≤–Ω–æ–π –≤–æ—Ä–æ–Ω–∫–µ** –Ω–∞ **–ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–∞–∫ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
  - –í—Å–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã, –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å –ª—é–±—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **Chat System**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —á–∞—Ç –≤ —Å–¥–µ–ª–∫–µ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, —É–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏ (@), —Ç–∏–ø–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **Companies & Contacts**: –°–ø–∏—Å–∫–∏, —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–¥–µ–ª–∫–∞–º

### API Endpoints
- `/api/auth/login` - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å JWT
- `/api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –∞–≤—Ç–æ-—Å–æ–∑–¥–∞–Ω–∏–µ–º pipeline
- `/api/auth/me` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/api/deals` - CRUD —Å–¥–µ–ª–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ account_id –∏ pipeline_id
- `/api/deals/[id]/contacts` - –ü—Ä–∏–≤—è–∑–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∫ —Å–¥–µ–ª–∫–∞–º (many-to-many)
- `/api/companies` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏—è–º–∏
- `/api/contacts` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- `/api/pipelines` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–æ–Ω–∫–∞–º–∏ –∏ —ç—Ç–∞–ø–∞–º–∏
- `/api/tasks` - –ó–∞–¥–∞—á–∏ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ —Å–¥–µ–ª–∫–∞–º
- `/api/account/active-pipeline` - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –≤–æ—Ä–æ–Ω–∫–∏
- `/api/account/users` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∞–∫–∫–∞—É–Ω—Ç–∞
- `/api/account/subscription` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ –ø–ª–∞–Ω–∞

### Subscription System
- **3 —Ç–∞—Ä–∏—Ñ–∞**: Free, Professional (1990‚ÇΩ/–º–µ—Å), Business (4990‚ÇΩ/–º–µ—Å)
- **Feature gating**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∏—Å–∫ –≤ —á–∞—Ç–µ)
- **–¢–∞–±–ª–∏—Ü—ã**: `subscriptions`, `features`, `subscription_features`

### UI/UX
- **Skeleton loaders**: –ü–ª–∞–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å placeholder'–∞–º–∏
- **Animations**: Slide-in –º–æ–¥–∞–ª–∫–∏, fade transitions
- **Responsive**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã
- **Dark theme**: –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ –≤ —Å—Ç–∏–ª–µ amoCRM

## –î–∞–ª—å—à–µ (–ø–ª–∞–Ω)

1. ~~–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö~~ ‚úÖ –ì–æ—Ç–æ–≤–æ
2. ~~–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ —Ä–æ–ª–∏~~ ‚úÖ JWT —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
3. ~~–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRM-—Å—É—â–Ω–æ—Å—Ç–∏~~ ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
4. ~~–ö–∞–Ω–±–∞–Ω —Å dnd-kit~~ ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
5. –û—Ç—á—ë—Ç—ã/–¥–∞—à–±–æ—Ä–¥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚è≥ –í –ø–ª–∞–Ω–∞—Ö
6. –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (owner, manager, user) ‚è≥ –í –ø–ª–∞–Ω–∞—Ö
7. Email-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ‚è≥ –í –ø–ª–∞–Ω–∞—Ö

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–≥—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤–∞—à–∏ Supabase –∫–ª—é—á–∏ –ª–æ–∫–∞–ª—å–Ω–æ (–Ω–µ –∫–æ–º–º–∏—Ç—è –∏—Ö) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `npm install` / `npm run dev` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ ‚Äî —Å–∫–∞–∂–∏—Ç–µ, —Ö–æ—Ç–∏—Ç–µ –ª–∏, —á—Ç–æ–±—ã —è —ç—Ç–æ —Å–¥–µ–ª–∞–ª —Å–µ–π—á–∞—Å.

## Full Access Mode (–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)

–ü–æ —è–≤–Ω–æ–º—É —É–∫–∞–∑–∞–Ω–∏—é –≤–ª–∞–¥–µ–ª—å—Ü–∞ (—Ñ—Ä–∞–∑—ã: "–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø", "–¥–µ–ª–∞–π –≤—Å—ë", "–Ω–µ –∂–¥–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è") –∞–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ.

–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:
- –ù–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ –æ–±—ã—á–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, –ª–æ–∫–∞–ª—å–Ω—ã–µ SQL SELECT/UPDATE, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π).
- –î–∞—ë—Ç –∫—Ä–∞—Ç–∫–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–∞–ø–¥–µ–π—Ç—ã –±–µ–∑ –ø–∞—É–∑ –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞.
- –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥ —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–ª–∏ —Ç—Ä—É–¥–Ω–æ–æ—Ç–∫–∞—Ç–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏: DROP, –º–∞—Å—Å–æ–≤—ã–µ DELETE, —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫, —Å–µ—Ä—å—ë–∑–Ω—ã–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º.
- –õ—é–±–∞—è —Ñ—Ä–∞–∑–∞ —Ç–∏–ø–∞ "–æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å" –∏–ª–∏ "—Å–ø—Ä–æ—Å–∏ –º–µ–Ω—è" –≤—ã–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º.

–¶–µ–ª—å ‚Äî —É–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∏ –∏ —É—Å–∫–æ—Ä–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è (–ø–∞—Ç—á–∏ –∫–æ–¥–∞, SQL –∫–æ–º–∞–Ω–¥—ã) –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏.

> –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É –≤–ª–∞–¥–µ–ª—å—Ü–∞ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–µ—Ä—å –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.

## Dev Server Persistence

–ù–µ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π dev-—Å–µ—Ä–≤–µ—Ä.

–ü—Ä–∞–≤–∏–ª–∞:
- –ù–ï –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `npm run dev`, –µ—Å–ª–∏ —è–≤–Ω–æ –Ω–µ —Å–∫–∞–∑–∞–Ω–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º.
- –î–ª—è –ª—é–±—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª (–º–∏–≥—Ä–∞—Ü–∏–∏, sql, —Å–±–æ—Ä–∫–∞, –∞–Ω–∞–ª–∏–∑).
- –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –±–∏–ª–¥ ‚Äî –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (Next –≤—ã–±–µ—Ä–µ—Ç –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç). –°—Ç–∞—Ä—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –æ—Å—Ç–∞–≤–∏—Ç—å.
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —è–≤–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –∏–ª–∏ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`.
- –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —É–ø–∞–ª —Å–∞–º ‚Äî –ø–æ–¥–Ω—è—Ç—å —Ç–∏—Ö–æ –±–µ–∑ –≤–æ–ø—Ä–æ—Å–∞.
- –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Ctrl+C / kill –¥–ª—è dev-–ø—Ä–æ—Ü–µ—Å—Å–∞ –±–µ–∑ –ø—Ä—è–º–æ–π –∫–æ–º–∞–Ω–¥—ã.

–ü—Ä–∏—á–∏–Ω–∞: –°—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∫ UI –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑—Ä—ã–≤–æ–≤.
